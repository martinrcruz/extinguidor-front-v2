<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>{{ isEdit ? 'Editar Vehículo' : 'Nuevo Vehículo' }}</ion-title>
  </ion-toolbar>
</ion-header>

<!-- <div class="breadcrumb">
  <ion-icon name="home-outline" color="gray"></ion-icon>
  <span>/</span>
  <span>Vehiculos</span>
  <span>/</span>
  <span class="breadcrumb-current">{{ isEdit ? 'Editar' : 'Crear' }}</span>
</div> -->

<ion-content>
  <div class="page-container">
    <div class="header">
      <h1>{{ isEdit ? 'Editar Vehículo' : 'Nuevo Vehículo' }}</h1>
    </div>

    <form [formGroup]="vehicleForm" (ngSubmit)="guardar()" class="form-container">
      <!-- Previsualización de la foto si existe -->
      <div class="photo-preview" *ngIf="vehicleForm.get('photo')?.value">
        <img [src]="vehicleForm.get('photo')?.value" alt="Foto del vehículo" />
      </div>

      <div class="form-section">
        <h2>Información Básica</h2>
        <ion-item>
          <ion-label position="stacked">Marca</ion-label>
          <ion-input formControlName="brand" placeholder="Marca del vehículo"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Modelo</ion-label>
          <ion-input formControlName="modelo" placeholder="Modelo del vehículo"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Matrícula</ion-label>
          <ion-input formControlName="matricula" placeholder="Ej: 1234 ABC"></ion-input>
        </ion-item>
      </div>

      <div class="form-section">
        <h2>Especificaciones</h2>
        <ion-item>
          <ion-label position="stacked">Combustible</ion-label>
          <ion-select formControlName="fuel" placeholder="Seleccione tipo de combustible">
            <ion-select-option value="Diesel">Diesel</ion-select-option>
            <ion-select-option value="Gasolina">Gasolina</ion-select-option>
          </ion-select>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Tipo</ion-label>
          <ion-select formControlName="type" placeholder="Seleccione tipo de vehículo">
            <ion-select-option value="Furgon">Furgoneta</ion-select-option>
            <ion-select-option value="Turismo">Turismo</ion-select-option>
          </ion-select>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Foto (URL)</ion-label>
          <ion-input formControlName="photo" placeholder="URL de la imagen"></ion-input>
        </ion-item>
      </div>

      <div class="form-section">
        <h2>Información Adicional</h2>
        <ion-item>
          <ion-label position="stacked">Kilometraje</ion-label>
          <ion-input formControlName="kilometraje" type="number" placeholder="Ej: 50000"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Fecha de Adquisición</ion-label>
          <ion-datetime 
            formControlName="fechaAdquisicion"
            display-format="yyyy-MM-dd"
            picker-format="yyyy-MM-dd"
            placeholder="Seleccione fecha de adquisición">
          </ion-datetime>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Fecha del Último Mantenimiento</ion-label>
          <ion-datetime 
            formControlName="fechaUltimoMantenimiento"
            display-format="yyyy-MM-dd"
            picker-format="yyyy-MM-dd"
            placeholder="Seleccione fecha del último mantenimiento">
          </ion-datetime>
        </ion-item>
      </div>

      <div class="form-actions">
        <ion-button expand="block" type="submit" [disabled]="vehicleForm.invalid">
          {{ isEdit ? 'Actualizar' : 'Crear' }}
        </ion-button>
        <ion-button expand="block" fill="outline" (click)="cancelar()">
          Cancelar
        </ion-button>
      </div>
    </form>
  </div>
</ion-content>
